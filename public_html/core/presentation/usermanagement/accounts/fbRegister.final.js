function registerWithFacebook(d,a,c){if(facebookStatus.sdkLoaded){if(!a){var e=facebookStatus.desiredScope}else{a.toLowerCase();var g=facebookStatus.desiredScope;var e=g+","+a}if(facebookStatus.authStatus==="connected"){var h=new Array();var h=e.split(",");var b=facebookStatus.grantedPermissions;var f=true;for(i=0;i<h.length;i++){if(b.indexOf(h[i])<0){f=false}}}else{var f=false}if(f){if(typeof d!="function"){throw"onCompleteFunction is not an actual function"}else{d()}}else{FB.login(function(k){if(k.authResponse){var j=e.split(",");FB.api("/me/permissions","get",function(m){var l=m.data;var n=new Array();for(i=0;i<l.length;i++){var p=l[i];if(p.status==="granted"){n.push(p.permission)}}var o=true;for(i=0;i<j.length;i++){if(n.indexOf(j[i])<0){o=false}}if(o){if(typeof d!="function"){throw"onCompleteFunction is not an actual function"}else{refreshFacebookLoginStatus();d()}}else{refreshFacebookLoginStatus();if(c){if(typeof c!="function"){throw"onCompleteFunction is not an actual function"}else{c()}}}})}else{if(c){if(typeof c!="function"){throw"onCompleteFunction is not an actual function"}else{c()}}}},{scope:e,auth_type:"rerequest"})}}else{alert("hang on... Facebook plugins are still being loaded...")}}function getFacebookUserDetails(){FB.api("/me","get",function(a){document.getElementById("username").value=a.first_name+" "+a.last_name;document.getElementById("facebookid").value=a.id;document.getElementById("mail").value=a.email;document.getElementById("firstname").readOnly=true;document.getElementById("firstname").value=a.first_name;document.getElementById("lastname").readOnly=true;document.getElementById("lastname").value=a.last_name;blockPasswordFields()})}function blockPasswordFields(){document.getElementById("password1").disabled=true;document.getElementById("password2").disabled=true;document.getElementById("phash").value=0}function getFacebookScope(){var a=new ajaxTransaction;a.destination="/core/logic/parameters.php";a.phpfunction="getFacebookScopeAjax";a.onComplete=function(){};a.ExecuteRequest()};